### Работа с docker file
Цель работы: освежить в памяти знания о докере, поизучать какие практики являются плохими, а какие хорошими.

### Подготовка
На мое счастье у меня уже была виртуальная машина на Ubuntu с докером, поэтому я почти сразу приступил к работе

### Bad practice dockerfile
```
FROM ubuntu:latest

WORKDIR /app

COPY . /app

RUN apt-get update && apt-get install -y libaa-bin iputils-ping
```

### 1 Latest
Тег `latest` не фиксирует конкретную версию образа — при следующей сборке может подтянуться новая Ubuntu, и сборка сломается.
Также докер билдился ооочень долго так как скачивалась последняя версия ubuntu. Заменим на стабильную версию `ubuntu:22.04`

<img width="816" height="901" alt="image" src="https://github.com/user-attachments/assets/9273783d-c46a-4285-a1cf-424b6956d369" /><br>

### 2 Не чистится кэш Apt
Без очистки кэша размер образа увеличивается, перепишем вот так, теперь мы не только устанавливаем пакеты, но и чистим кэш
```
RUN apt-get update && \
    apt-get install -y \
    libaa-bin \
    iputils-ping && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*
```
### 3 Запуск от root
Не всегда хочется, чтобы приложения имели root права, это создает возможные уязвимости и вредит безопасности, добавим создание нового пользователя <br>
```
RUN useradd -m dockeruser
USER dockeruser
```
### Good dockerfile 
<img width="255" height="496" alt="image" src="https://github.com/user-attachments/assets/f632a160-b4d8-4583-924a-cdada0c65587" /> <br>
Исправлены основные ошибки, билдится стало как минимум в 2 раза быстрее
### Bad practice using containers
1. Использование контейнеров как виртуальных машин и запускать много всего <br>
В идеале 1 контейнер - 1 задача, иначе нарушается принцип единственной ответственности и появляются сложности с масштабированием
2. Хранение данных внутри контейнера <br>
Данные теряются при удалении/перезапуске контейнера, как решение можно использовать Docker Volumes
### Итоги
На самом деле bad practice dockerfile это практически мой файл с 1 семестра информатики, я был очень удивлен, что он содержал абсолютно все популярные bad practice, было полезно поработать над ошибками 
